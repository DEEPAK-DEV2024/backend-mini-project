<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Register</title>
    <script src="https://cdn.tailwindcss.com"></script>
</head>

<body class="bg-slate-800 p-10">
    <div class="flex gap-4">
        <a class="h-12 w-12 rounded-md inline-block overflow-hidden" href="/profile/upload">
            <img src="/images/upload/<%= user.profilepic %>" alt="" class="h-full w-full">
        </a>
        <h1 class="text-gray-400 text-4xl mb-4">Hello,<span class="text-gray-100">
                <%= user.username %>
            </span></h1>
    </div>
    <div class="flex items-start justify-between">
        <form action="/post" method="post">
            <textarea name="content"
                class="bg-transparent border-[1px] border-gray-300 w-96 block resize-none p-2 rounded-md h-20 mb-2 text-white"
                placeholder="What Is In Your Mind"></textarea>
            <input type="submit" value="Create Post" class="px-5 py-2 bg-blue-500 rounded-md">
        </form>
        <a href="/logout" class="text-xl bg-red-400 px-2 py-1 rounded-md">Logout</a>
    </div>

    <!-- showing post -->
    <hr class="mt-5">
    <h1 class="text-gray-100 my-3 text-2xl">Post's</h1>

    <div>
        <% user.posts.forEach((post)=> { %>
            <div class="h-fit-content border-[1px] border-gray-600 rounded-md py-1 px-2 w-[500px] mb-2">
                <h1 class="text-blue-600 text-lg">@<%= user.username %>
                </h1>
                <p class="text-gray-500">
                    <%= post.content %>
                </p>
                <small class="text-gray-400">
                    <%= post.likes.length %>
                        Like
                </small>
                <div class="flex gap-4">
                    <a href="/like/<%=post._id%>" class="text-blue-500">
                        <%= post.likes.indexOf(user._id)===-1 ? "Like" : "Unlike" ; %>
                    </a>
                    <a href="/edit/<%=post._id%>" class="text-gray-500">Edit</a>
                </div>
            </div>
            <% }) %>
    </div>
</body>

</html>